"use strict";!function(t){t.noConflict(),window.onerror=function(t,e,a,n,r){console.log("Error FECSS: "+e+":"+a+":"+n+": "+JSON.stringify(t)+"\n"+JSON.stringify(r))},t(window).on("load",function(){t.Azbn7.body.find(".azbn7-preloader").data("is_loaded",!0)}),t(window).on("load",function(){t.Azbn7.body.find(".azbn7-preloader").data("is_loaded",!0)}),t(function(){BX24.init(function(){console.log("Bitrix24 lib inited!",BX24.isAdmin()),BX24.callMethod("user.current",{},function(t){alert("Привет, "+t.data().NAME+"!")})}),function(){var e="noname-browser",a=navigator.userAgent.toLowerCase();-1!=a.indexOf("msie")&&(e="msie"),-1!=a.indexOf("trident")&&(e="msie"),-1!=a.indexOf("konqueror")&&(e="konqueror"),-1!=a.indexOf("firefox")&&(e="firefox"),-1!=a.indexOf("safari")&&(e="safari"),-1!=a.indexOf("chrome")&&(e="chrome"),-1!=a.indexOf("chromium")&&(e="chromium"),-1!=a.indexOf("opera")&&(e="opera"),-1!=a.indexOf("yabrowser")&&(e="yabrowser"),t("html").eq(0).addClass(e)}(),t(document.body).on("azbn7.init",null,{},function(e){t(document.body).attr("data-created_at",(new Date).getTime())}),t(document.body).on("changeClass",null,{},function(t,e){}),t.Azbn7.body.on("azbn7.mdl.cart.calculation",".azbn7-cart",{},function(e,a,n){e.preventDefault();var r=t(this);t.Azbn7.mdl("Cart").calculation();var o="";a&&(o=o+'[data-cart-id="'+a+'"]'),n&&(o=o+'[data-cart-variant="'+n+'"]'),r.find(".items .item"+o).each(function(e){var a=t(this),n=a.attr("data-cart-id"),r=a.attr("data-cart-variant");if(t.Azbn7.mdl("Cart").data.cart[n]&&t.Azbn7.mdl("Cart").data.cart[n][r]){var o=t.Azbn7.mdl("Cart").data.cart[n][r];a.find(".cart-qty.item-qty").html(parseFloat(o.qty))}else a.find(".cart-qty.item-qty").html(0)}),r.find(".cart-calculation-to_pay").html(t.Azbn7.mdl("Cart").data.calculation.to_pay)}),t.Azbn7.body.on("click.azbn7.mdl.cart.add",".cart-btn.item-add",{},function(e){e.preventDefault();var a=t(this),n=a.closest(".item"),r=n.attr("data-cart-id"),o=n.attr("data-cart-variant");t.Azbn7.mdl("Cart").add(r,o,a.attr("data-cart-qty"),n.attr("data-cart-price"),n.attr("data-cart-discount")),n.closest(".azbn7-cart").trigger("azbn7.mdl.cart.calculation",[r,o])}),t.Azbn7.body.on("click.azbn7.mdl.cart.remove",".cart-btn.item-remove",{},function(e){e.preventDefault();var a=t(this),n=a.closest(".item"),r=n.attr("data-cart-id"),o=n.attr("data-cart-variant");t.Azbn7.mdl("Cart").remove(r,o,a.attr("data-cart-qty"),n.attr("data-cart-price"),n.attr("data-cart-discount")),n.closest(".azbn7-cart").trigger("azbn7.mdl.cart.calculation",[r,o])}),t.Azbn7.body.find(".azbn7-dropdown").length&&t.Azbn7.body.on("click.azbn7.dropdown.toggle",".azbn7-dropdown .azbn7-dropdown__toggle",{},function(e){e.preventDefault(),t(this).closest(".azbn7-dropdown").toggleClass("_active")}),function(){var e=t.Azbn7.body.find(".azbn7-preloader");if(e.length){var a=parseInt(e.attr("data-time-limit"))||0,n=!1,r=0;if(t.Azbn7.body.on("azbn7.preloader.check",null,{},function(a){a.preventDefault(),e.data("is_loaded")&&n&&t.Azbn7.body.removeClass("_preloading")}),t.Azbn7.body.on("azbn7.preloader.loaded",null,{},function(a){a.preventDefault(),e.data("is_loaded",!0),t.Azbn7.body.trigger("azbn7.preloader.check")}),t.Azbn7.body.on("click.azbn7.preloader.cancel-btn",".azbn7-preloader .azbn7-preloader__cancel-btn",{},function(a){a.preventDefault(),e.data("is_loaded",!0),n=!0,t.Azbn7.body.trigger("azbn7.preloader.check")}),a)o=setTimeout(function(){n=!0,e.data("is_loaded",!0),t.Azbn7.body.trigger("azbn7.preloader.check")},a);else var o=setInterval(function(){Math.random()>.5&&r<100?(r++,e.data("is_loaded")&&(r+=9)):r>99&&(clearInterval(o),n=!0,t.Azbn7.body.trigger("azbn7.preloader.check"))},40)}else t.Azbn7.body.removeClass("_preloading")}(),function(){var e=t.Azbn7.body.find(".azbn7-preloader");if(e.length){var a=parseInt(e.attr("data-time-limit"))||0,n=!1,r=0;if(t.Azbn7.body.on("azbn7.preloader.check",null,{},function(a){a.preventDefault(),e.data("is_loaded")&&n&&t.Azbn7.body.removeClass("_preloading")}),t.Azbn7.body.on("azbn7.preloader.loaded",null,{},function(a){a.preventDefault(),e.data("is_loaded",!0),t.Azbn7.body.trigger("azbn7.preloader.check")}),t.Azbn7.body.on("click.azbn7.preloader.cancel-btn",".azbn7-preloader .azbn7-preloader__cancel-btn",{},function(a){a.preventDefault(),e.data("is_loaded",!0),n=!0,t.Azbn7.body.trigger("azbn7.preloader.check")}),a)o=setTimeout(function(){n=!0,e.data("is_loaded",!0),t.Azbn7.body.trigger("azbn7.preloader.check")},a);else var o=setInterval(function(){Math.random()>.5&&r<100?(r++,e.data("is_loaded")&&(r+=9)):r>99&&(clearInterval(o),n=!0,t.Azbn7.body.trigger("azbn7.preloader.check"))},40)}else t.Azbn7.body.removeClass("_preloading")}(),t(document.body).on("submit.site","form",{},function(e){var a=t(this).attr("data-input-status")||"";"ok"==a||"1"==a||e.preventDefault()}),t(document.body).on("site.form.required.check","form",{},function(e){e.preventDefault();var a=t(this),n=0;a.find(".input-block[data-required]").each(function(e){var a=t(this).attr("data-input-status")||"";"ok"!=a&&"1"!=a||(n+=1)}),n==a.find(".input-block[data-required]").length?(a.find(".submit-block").attr("data-input-status","ok"),a.attr("data-input-status","ok")):(a.find(".submit-block").attr("data-input-status",""),a.attr("data-input-status",""))}),t(document.body).on("keyup.site blur.site focus.site",'.input-block[data-required="text"] input:not([type="search"]), .input-block[data-required="text"] textarea, .input-block[data-required="password"] input',{},function(e){e.preventDefault();var a=t(this),n=t(this).val(),r=a.closest(".input-block").attr("data-required")||"";""==n||"text"!=r&&"password"!=r?a.closest(".input-block").attr("data-input-status",""):a.closest(".input-block").attr("data-input-status","ok"),a.closest("form").trigger("site.form.required.check")}),t(document.body).on("keyup.site blur.site focus.site",'.input-block[data-required="email"] input',{},function(e){e.preventDefault();var a=t(this),n=t(this).val(),r=a.closest(".input-block").attr("data-required")||"";""!=n&&"email"==r&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)?a.closest(".input-block").attr("data-input-status","ok"):a.closest(".input-block").attr("data-input-status",""),a.closest("form").trigger("site.form.required.check")}),t(document.body).on("keyup.site blur.site focus.site",'.input-block[data-required="check-pass"] input',{},function(e){e.preventDefault();var a=t(this),n=t(this).val(),r=t('.input-block input[name="pass"]').val();""!=n&&""!=r&&"check-pass"==a.closest(".input-block").attr("data-required")&&r==n?a.closest(".input-block").attr("data-input-status","ok"):a.closest(".input-block").attr("data-input-status",""),a.closest("form").trigger("site.form.required.check")}),t(document.body).on("keyup.site blur.site focus.site",'.input-block input[type="search"]',{},function(e){e.preventDefault();var a=t(this);t(this).val().length>2&&"search"==a.closest(".input-block").attr("data-required")?(a.closest(".input-block").attr("data-input-status","ok"),a.closest(".input-block").next(".submit-block").attr("data-input-status","ok")):(a.closest(".input-block").attr("data-input-status",""),a.closest(".input-block").next(".submit-block").attr("data-input-status","")),a.closest("form").trigger("site.form.required.check")}),t(document.body).on("change.site blur.site",".input-block select",{},function(e){e.preventDefault();var a=t(this);""!=(t(this).find("option:selected").eq(0).attr("value")||"")&&"select"==a.closest(".input-block").attr("data-required")?a.closest(".input-block").attr("data-input-status","ok"):a.closest(".input-block").attr("data-input-status",""),a.closest("form").trigger("site.form.required.check")}),t(function(){t("form").trigger("site.form.required.check"),t(".input-block input, .input-block textarea, .input-block select").trigger("blur.site")}),t(document.body).on("click.azbn7.layout-content.content-menu-toggle",".layout-content .content-menu-toggle",{},function(e){e.preventDefault();var a=t(this),n=a.closest(".layout-content").find(".content-menu");a.toggleClass("_active"),n.toggleClass("_in-screen")}),function(){var e=t.Azbn7.body.find(".header-menu");if(e.length){var a=e.find(".header-menu-btn"),n=(e.find(".items._list"),e.find(".items._visible"),e.find(".items._hidden"));t(document.body).on("click.azbn7.header-menu.header-menu-btn",".header-menu .header-menu-btn",{},function(t){t.preventDefault(),n.toggleClass("_active"),a.toggleClass("_active")})}}(),t(window).on("resize",function(e){!function(){var e=t.Azbn7.body.find(".layout-content");if(e.length){var a=t(".layout-header"),n=t(".layout-footer");e.css({"min-height":t(window).outerHeight(!0)-a.outerHeight(!0)-n.outerHeight(!0)+"px"})}}(),function(){var e=t.Azbn7.body.find(".header-menu");if(e.length){var a=e.find(".header-menu-ctrl"),n=e.find(".items._list"),r=e.find(".items._visible"),o=e.find(".items._hidden");r.empty(),o.empty();var i=e.width()-a.outerWidth(!0);n.children().clone(!0).appendTo(r),r.children().get().reverse().map(function(e){return r.outerWidth(!0)<i||t(e).prependTo(o),e}),r.outerWidth(!0)<i&&0==o.children().length?a.addClass("_hidden"):a.removeClass("_hidden")}}()}).trigger("resize"),t(window).on("scroll",function(t){}).trigger("scroll"),window.onbeforeunload=function(e){t("body").trigger("azbn7.window.unload",[e])},t(document.body).trigger("azbn7.init")})}(jQuery);